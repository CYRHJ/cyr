<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>卖座网的循环</title>
		<meta name="viewport" content="width=device-width" />
		<script src="https://cdn.bootcss.com/react/15.4.2/react.min.js"></script>
		<script src="https://cdn.bootcss.com/react/15.4.2/react-dom.min.js"></script>
		<script src="https://cdn.bootcss.com/babel-standalone/6.22.1/babel.min.js"></script>
		<style>
			/*浏览器的默认样式重置*/
			/**{padding:0;margin: 0;}/*不认可，影响性能*/
			body,h1,h2,h3,h4,h5,h6,hr,p,ul,ol,li,pre,button,input,textarea {margin:0;padding:0;}
			body{font-size: 12px; color: #000; background: #eee;}
			ul,li{list-style: none;}
			a{text-decoration: none;}
			a:hover{color: #000;}
			.film-item{margin: 5%; width: 90%;}
			.film-item img{width: 100%; height: auto;}
			.film-item .film-text{height: 50px; background: #fff; padding-top:5px; padding-left: 5px;}
			.film-item .film-count{color:#ccc;}
			.film-header{width: 100%; height: 50px; background:#282828; position: fixed; 
			top:0;left:0;line-height:50px; color:#fff;padding-left: 20px;}
			.film-left{background:#282828; position: fixed; 
			top:50px;left:0; bottom:0; right:110px;  color:#fff;transition: right ease 0.5s;
			overflow: hidden; }
			.film-left ul li{min-width: 200px;}
		</style>
	</head>
	<body>
		<div id="exap" class="myClass"></div>
		<script type="text/babel">
			//正在热映
			let NowPlaying = React.createClass({
				render:function(){
					let nowPlayingArr = [{"id":4311,"name":"碟中谍6：全面瓦解","cover":{"origin":"https://pic.maizuo.com/usr/movie/f250c1b1b54861e1d81bcb532d42fd93.jpg"},"poster":{"origin":"https://pic.maizuo.com/usr/movie/4733acd323f10449cf83cd49ea240110.jpg","thumbnail":"https://pic.maizuo.com/usr/movie/4733acd323f10449cf83cd49ea240110.jpg?x-oss-process=image/resize,m_fixed,h_0,w_300"},"intro":"全面瓦解","premiereAt":1535644800000,"grade":"8.5","watchCount":0,"cinemaCount":217,"scheduleCount":4746,"isPromotion":true,"isNowPlaying":true,"isComingSoon":"","isPresold":""},{"id":4356,"name":"阿尔法：狼伴归途","cover":{"origin":"https://pic.maizuo.com/usr/movie/b355fb24a76b25fe7baac548cf660d19.jpg"},"poster":{"origin":"https://pic.maizuo.com/usr/movie/d59714f3db7ee5188eda9b4711e8bd7b.jpg","thumbnail":"https://pic.maizuo.com/usr/movie/d59714f3db7ee5188eda9b4711e8bd7b.jpg?x-oss-process=image/resize,m_fixed,h_0,w_300"},"intro":"狼性仁心  非凡历险","premiereAt":1536249600000,"grade":"8.5","watchCount":0,"cinemaCount":217,"scheduleCount":2139,"isPromotion":true,"isNowPlaying":true,"isComingSoon":"","isPresold":""},{"id":4360,"name":"黄金兄弟","cover":{"origin":"https://pic.maizuo.com/usr/movie/89e79e0e2560f5d26e695b476e8997fd.jpg"},"poster":{"origin":"https://pic.maizuo.com/usr/movie/7affbfe709c89903bb2a08880841513d.jpg","thumbnail":"https://pic.maizuo.com/usr/movie/7affbfe709c89903bb2a08880841513d.jpg?x-oss-process=image/resize,m_fixed,h_0,w_300"},"intro":"好兄弟 有今生  有来世","premiereAt":1537459200000,"grade":"8.0","watchCount":0,"cinemaCount":7,"scheduleCount":73,"isPromotion":true,"isNowPlaying":true,"isComingSoon":"","isPresold":""},{"id":4355,"name":"传奇的诞生","cover":{"origin":"https://pic.maizuo.com/usr/movie/56e484a7b91e59d1b005dfa93c80482f.jpg"},"poster":{"origin":"https://pic.maizuo.com/usr/movie/56e484a7b91e59d1b005dfa93c80482f.jpg","thumbnail":"https://pic.maizuo.com/usr/movie/56e484a7b91e59d1b005dfa93c80482f.jpg?x-oss-process=image/resize,m_fixed,h_0,w_300"},"intro":"梦想造就王者   奋斗成就传奇","premiereAt":1536249600000,"grade":"8.0","watchCount":0,"cinemaCount":193,"scheduleCount":960,"isPromotion":true,"isNowPlaying":true,"isComingSoon":"","isPresold":""},{"id":4365,"name":"李宗伟：败者为王","cover":{"origin":"https://pic.maizuo.com/usr/movie/d15469628d30ef35d0275decf520711e.jpg"},"poster":{"origin":"https://pic.maizuo.com/usr/movie/d15469628d30ef35d0275decf520711e.jpg","thumbnail":"https://pic.maizuo.com/usr/movie/d15469628d30ef35d0275decf520711e.jpg?x-oss-process=image/resize,m_fixed,h_0,w_300"},"intro":"相信那些相信你可以的人","premiereAt":1536249600000,"grade":"7.2","watchCount":0,"cinemaCount":106,"scheduleCount":284,"isPromotion":true,"isNowPlaying":true,"isComingSoon":"","isPresold":""}];
					
					
					return <ul>{
						nowPlayingArr.map((item)=><FilmItem item={item} type="NOWPLAYING"/>)
					}</ul>
				}
			});
			//即将上映
			let CommingSoon = React.createClass({
				render:function(){
					let commingSoonArr = [{"id":4360,"name":"黄金兄弟","cover":{"origin":"https://pic.maizuo.com/usr/movie/89e79e0e2560f5d26e695b476e8997fd.jpg"},"poster":{"origin":"https://pic.maizuo.com/usr/movie/7affbfe709c89903bb2a08880841513d.jpg","thumbnail":"https://pic.maizuo.com/usr/movie/7affbfe709c89903bb2a08880841513d.jpg?x-oss-process=image/resize,m_fixed,h_0,w_300"},"intro":"好兄弟 有今生  有来世","premiereAt":1537459200000,"grade":"8.0","watchCount":0,"cinemaCount":0,"scheduleCount":0,"isPromotion":true,"isNowPlaying":"","isComingSoon":true,"isPresold":""},{"id":4186,"name":"低压槽：欲望之城","cover":{"origin":"https://pic.maizuo.com/usr/movie/8340b722e6472470d02138656c623806.jpg"},"poster":{"origin":"https://pic.maizuo.com/usr/movie/a6e3e55f806bf57bbe1fcf49f168d3ff.jpg","thumbnail":"https://pic.maizuo.com/usr/movie/a6e3e55f806bf57bbe1fcf49f168d3ff.jpg?x-oss-process=image/resize,m_fixed,h_0,w_300"},"intro":"真相往往不止一层","premiereAt":1546185600000,"grade":"8.3","watchCount":72396,"cinemaCount":0,"scheduleCount":0,"isPromotion":true,"isNowPlaying":"","isComingSoon":true,"isPresold":""},{"id":4379,"name":"美丽战争","cover":{"origin":"https://pic.maizuo.com/usr/movie/338daae5a880b9785a52454ea30fe522.jpg"},"poster":{"origin":"https://pic.maizuo.com/usr/movie/0c4caed8638508dfbbe5a7fceba92247.jpg","thumbnail":"https://pic.maizuo.com/usr/movie/0c4caed8638508dfbbe5a7fceba92247.jpg?x-oss-process=image/resize,m_fixed,h_0,w_300"},"intro":"伤口不会痛一辈子 但遗憾会 ","premiereAt":1536854400000,"grade":"8.0","watchCount":0,"cinemaCount":0,"scheduleCount":0,"isPromotion":true,"isNowPlaying":"","isComingSoon":true,"isPresold":""}];
					return <ul>{
						commingSoonArr.map((item)=><FilmItem item={item} type="COMMINGSOON" />)
					}</ul>
				}
			});
			
			
			//单个 的item的组件
			//return 后面 必须跟 标签或者小括号 ，记得不能转行写
			let FilmItem = React.createClass({
				changeTime:function(time){
					 var date =  new Date(time);
				    //var y = 1900+date.getYear();
				    var m = "0"+(date.getMonth()+1);
				    var d = "0"+date.getDate();
				    return m.substring(m.length-2,m.length)+"月"+d.substring(d.length-2,d.length)+'日';
				},
				render:function(){
					const {item,type} = this.props;//解构
					//相当于
					//const item = this.props.item;
					return (
						<li className="film-item">
							<img  src={item.cover.origin} />
							<div className="film-text">
							{item.name}<br/>
							{
								type=='NOWPLAYING'?
								<span className="film-count">{item.cinemaCount}家影院上映,{item.watchCount}人购票</span>
								:<span className="film-count">{this.changeTime(item.premiereAt)}上映</span>
							}
							</div>
						</li>
					)
				}
			})
			
			//头部和左侧菜单
			let FilmCommon = React.createClass({
				//设置初始值
				getInitialState:function(){
					return {
						menuType:false
					}
				},
				changeMenu:function(){
					//更改菜单状态
					this.setState({
						menuType:!this.state.menuType
					})
				},
				render:function(){
					return <div >
						<div className="film-header" onClick={this.changeMenu}>卖座电影</div>
						<div className="film-left" style={this.state.menuType?{'right':'30%'}:{'right':'100%'}}>
							<ul>
								<li>
									左侧
								</li>
							</ul>
						</div>
					</div>
				}
			})
			
			//渲染到页面
			ReactDOM.render(
				<div>
					<FilmCommon />
					<NowPlaying/>
					<CommingSoon/>
				</div>
				,document.getElementById('exap'));
		</script>

	</body>
</html>
